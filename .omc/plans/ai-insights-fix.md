# AI Insights 페이지 수정 계획

## 문제 분석

### 원인 1: 페이지 로드 시 자동 인사이트 생성 없음
`AIInsightsPage.tsx`에 `useEffect`가 없어서 페이지 진입 시 인사이트가 자동 생성되지 않음.
사용자가 "새로고침" 버튼을 수동으로 클릭해야만 인사이트가 생성됨.

### 원인 2: 데이터 없을 때 안내 UI 없음
`analyticsData`가 null이면 버튼만 disabled 되고, 사용자에게 왜 동작하지 않는지 설명이 없음.
InsightCard에 빈 content(`''`)가 전달되어 빈 카드만 표시됨.

### 원인 3: API 오류 시 사용자 피드백 없음
`handleGenerateInsights`에서 catch만 하고 console.error만 출력. 사용자에게 오류 메시지를 표시하지 않음.

## 수정 사항

### Task 1: useEffect로 자동 인사이트 생성
**파일**: `src/pages/AIInsightsPage.tsx`

`useEffect` 추가 - `analyticsData`가 준비되고 아직 인사이트가 생성되지 않았을 때 자동 호출:

```typescript
import { useState, useCallback, useMemo, useEffect } from 'react'

// ... existing code ...

const [hasAutoGenerated, setHasAutoGenerated] = useState(false)

// 페이지 로드 시 자동 인사이트 생성
useEffect(() => {
  if (analyticsData && !hasAutoGenerated && !isGenerating) {
    setHasAutoGenerated(true)
    handleGenerateInsights()
  }
}, [analyticsData, hasAutoGenerated, isGenerating, handleGenerateInsights])
```

### Task 2: 오류 상태 표시
**파일**: `src/pages/AIInsightsPage.tsx`

```typescript
const [errorMessage, setErrorMessage] = useState<string>('')

// handleGenerateInsights 수정
const handleGenerateInsights = useCallback(async () => {
  if (!analyticsData) return
  setIsGenerating(true)
  setErrorMessage('')
  try {
    const results = await generateAllInsights(analyticsData, language)
    setInsights(results)
    setLastUpdated(new Date().toLocaleTimeString())
  } catch (error) {
    console.error('Failed to generate insights:', error)
    setErrorMessage(error instanceof Error ? error.message : t('aiInsights.generateError'))
  } finally {
    setIsGenerating(false)
  }
}, [analyticsData, language, t])
```

Alert 컴포넌트로 에러 표시:
```tsx
{errorMessage && (
  <Alert severity="error" onClose={() => setErrorMessage('')} sx={{ mb: 2 }}>
    {errorMessage}
  </Alert>
)}
```

### Task 3: 데이터 없을 때 안내 메시지
**파일**: `src/pages/AIInsightsPage.tsx`

`analyticsData`가 null일 때 안내 표시:
```tsx
{!analyticsData && !isGenerating && (
  <Alert severity="info" sx={{ mb: 2 }}>
    {t('aiInsights.noData')}
  </Alert>
)}
```

### Task 4: 번역 키 추가
**파일**: `src/locales/ko/translation.json`, `src/locales/vi/translation.json`

```json
// ko
"generateError": "AI 인사이트 생성에 실패했습니다. 잠시 후 다시 시도해주세요.",
"noData": "분석할 검사 데이터가 없습니다. 검사를 실행한 후 다시 확인해주세요."

// vi
"generateError": "Không thể tạo AI insights. Vui lòng thử lại sau.",
"noData": "Không có dữ liệu kiểm tra để phân tích. Vui lòng thực hiện kiểm tra và thử lại."
```

## 수정 대상 파일

| 파일 | 변경 |
|------|------|
| `src/pages/AIInsightsPage.tsx` | useEffect 자동 생성, 오류/데이터 없음 표시 |
| `src/locales/ko/translation.json` | generateError, noData 키 추가 |
| `src/locales/vi/translation.json` | generateError, noData 키 추가 |

## 수용 기준
- [ ] 페이지 진입 시 인사이트가 자동 생성됨
- [ ] API 오류 시 사용자에게 에러 메시지 표시
- [ ] 검사 데이터 없을 때 안내 메시지 표시
- [ ] 수동 "새로고침" 버튼도 정상 작동
- [ ] 빌드 성공
