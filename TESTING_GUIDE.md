# CNC QC KPI 프론트엔드 테스팅 가이드

## 개요

이 애플리케이션은 **Mock 모드**로 설정되어 있어 Supabase 연결 없이 모든 기능을 테스트할 수 있습니다.

## Mock 모드 설정

### 전역 설정

`src/config/app.config.ts` 파일에서 Mock 모드를 제어합니다:

```typescript
// 전체 Mock 모드 활성화/비활성화
export const USE_MOCK_MODE = true  // true: Mock 사용, false: 실제 Supabase 사용
```

### 개별 모듈별 설정

필요시 각 모듈별로 Mock 모드를 개별 제어할 수 있습니다:

```typescript
export const USE_MOCK_AUTH = USE_MOCK_MODE
export const USE_MOCK_INSPECTION = USE_MOCK_MODE
export const USE_MOCK_ANALYTICS = USE_MOCK_MODE
export const USE_MOCK_MANAGEMENT = USE_MOCK_MODE
export const USE_MOCK_REPORTS = USE_MOCK_MODE
```

## Mock 서비스 위치

모든 Mock 서비스는 `src/ui_test/mockServices/` 디렉토리에 있습니다:

- `mockAuthService.ts` - 인증 관련 Mock 데이터
- `mockInspectionService.ts` - 검사 실행 Mock 데이터
- `mockAnalyticsService.ts` - 분석 대시보드 Mock 데이터
- `mockManagementService.ts` - 마스터 데이터 관리 Mock 데이터
- `mockReportService.ts` - 리포트 생성/관리 Mock 데이터

## 테스트 계정

### 로그인 정보

Mock 모드에서 사용 가능한 테스트 계정 (총 15명):

#### 관리자 (Admin - 2명)
- **Email**: admin@test.com / admin2@test.com
- **Password**: password123
- **권한**: 모든 기능 접근 가능

#### 매니저 (Manager - 3명)
- **Email**: manager@test.com / manager2@test.com / manager3@test.com
- **Password**: password123
- **권한**: 분석, 리포트, 불량 관리 가능

#### 검사자 (Inspector - 10명)
- **Email**: inspector@test.com ~ inspector10@test.com
- **Password**: password123
- **권한**: 검사 실행, 불량 등록 가능

> 💡 **Tip**: 애플리케이션 시작 시 브라우저 콘솔에 테스트 계정 정보가 자동으로 출력됩니다.

> 📊 **데이터 규모**: 600건의 검사 데이터 (최근 90일), 10개 설비, 15개 제품 모델

## 기능별 테스트 시나리오

### 1. 대시보드 (Dashboard)

**테스트 항목:**
- ✅ 금일 검사 건수 표시
- ✅ 합격률 표시
- ✅ 불량률 표시
- ✅ 평균 검사 시간 표시
- ✅ 최근 검사 기록 목록
- ✅ 최근 불량 발생 목록

**Mock 데이터:**
- 약 100건의 검사 기록
- 30건의 불량 데이터
- 3개 설비, 5개 제품 모델

### 2. 검사 실행 (Inspection)

**테스트 항목:**
- ✅ 설비 선택
- ✅ 제품 모델 선택
- ✅ 검사 항목 자동 로드
- ✅ 측정값 입력
- ✅ 자동 판정 (합격/불합격)
- ✅ 진행률 표시
- ✅ 검사 저장

**테스트 시나리오:**
1. 설비 선택: "CNC 밀링 #1"
2. 모델 선택: "BHB-002"
3. 검사 항목 5개 자동 로드 확인
4. 각 항목에 측정값 입력
5. 공차 범위 내/외 값으로 합격/불합격 자동 판정 확인
6. 검사 저장 후 대시보드에서 확인

### 3. 불량 관리 (Defects)

**테스트 항목:**
- ✅ 불량 목록 조회
- ✅ 상태별 필터링 (전체/대기/처리중/완료)
- ✅ 불량 상세 정보 조회
- ✅ 불량 상태 변경 (대기 → 처리중 → 완료)

**테스트 시나리오:**
1. 불량 목록에서 "대기" 상태 필터링
2. 불량 선택 후 상세 정보 확인
3. "조치 시작" 버튼으로 상태를 "처리중"으로 변경
4. "조치 완료" 버튼으로 상태를 "완료"로 변경
5. 필터를 "완료"로 변경하여 처리된 불량 확인

### 4. 분석 (Analytics)

**테스트 항목:**
- ✅ 기간별 KPI 표시 (7일/30일/90일)
- ✅ 설비별/모델별 필터링
- ✅ 불량률 추이 차트
- ✅ 모델별 불량 분포
- ✅ 불량 유형 분포
- ✅ 설비별 성능 (파레토 차트)
- ✅ 시간대별 검사 분포
- ✅ 검사자별 성능

**테스트 시나리오:**
1. 기간 선택: "최근 30일"
2. 각 탭 클릭하여 차트 표시 확인
3. 설비 필터 적용하여 특정 설비 데이터만 확인
4. 모델 필터 적용하여 특정 모델 데이터만 확인

### 5. 리포트 (Reports)

**테스트 항목:**
- ✅ 리포트 생성 (일일/주간/월간/맞춤)
- ✅ PDF/Excel 형식 선택
- ✅ 기간 선택
- ✅ 설비/모델 필터링
- ✅ 리포트 목록 조회
- ✅ 리포트 다운로드
- ✅ 리포트 삭제
- ✅ 리포트 요약 통계

**테스트 시나리오:**

#### PDF 리포트 생성
1. "리포트 생성" 탭 선택
2. 리포트 유형: "주간" 선택
3. 형식: "PDF" 선택
4. "생성" 버튼 클릭
5. 약 2초 후 PDF 파일 자동 다운로드
6. PDF 파일 열어서 내용 확인:
   - 요약 통계
   - 불량 유형별 통계
   - 설비별 성능
   - 모델별 성능

#### Excel 리포트 생성
1. 형식: "Excel" 선택
2. "생성" 버튼 클릭
3. Excel 파일 다운로드
4. Excel 파일 열어서 4개 시트 확인:
   - Summary (요약)
   - Defects by Type (불량 유형별)
   - Machine Performance (설비별 성능)
   - Model Performance (모델별 성능)

#### 리포트 목록 관리
1. "리포트 목록" 탭 선택
2. 생성된 리포트 5개 확인
3. 다운로드 버튼으로 리포트 재다운로드
4. 삭제 버튼으로 리포트 삭제

### 6. 관리 (Management)

**테스트 항목:**
- ✅ 제품 모델 등록/수정/삭제
- ✅ 검사 항목 등록/수정/삭제
- ✅ 검사 항목의 기준값/공차 설정

**테스트 시나리오:**

#### 제품 모델 관리
1. "제품 모델 등록" 버튼 클릭
2. 모델 코드: "TEST-001" 입력
3. 모델명: "테스트 제품" 입력
4. 저장 후 목록에서 확인
5. 수정 버튼으로 정보 변경
6. 삭제 버튼으로 삭제

#### 검사 항목 관리
1. 제품 모델 선택
2. "검사 항목 등록" 버튼 클릭
3. 항목명: "길이" 입력
4. 데이터 유형: "수치형" 선택
5. 기준값: 100, 공차 상한: 100.5, 공차 하한: 99.5 입력
6. 단위: "mm" 입력
7. 저장 후 목록에서 확인

## Mock 데이터 구조

### 검사 데이터
- **총 600건**의 검사 기록 (최근 90일)
- **합격률**: 약 96% (설비별로 2-5.5% 불량률)
- **설비**: 10개
  - CNC 밀링 #1, #2
  - CNC 선반 #1, #2
  - CNC 복합기 #1
  - 머시닝센터 #1, #2
  - 연삭기 #1, #2
  - EDM 방전기 #1
- **모델**: 15개 (BHB-002부터 PLT-015까지)
- **시간대 패턴**: 근무 시간 (7:00-18:00), 점심시간 적음
- **요일 패턴**: 월요일 80%, 수요일 120%, 금요일 90%

### 불량 데이터
- **총 25-35건**의 불량 (검사 실패 건수 기반 자동 생성)
- **유형**: 치수 불량 (40%), 표면 불량 (25%), 형상 불량 (15%), 재질/조립/도장/기타
- **상태 분포**: 날짜 기반 자동 결정
  - 최근 3일: 주로 대기/처리중
  - 7일 이상: 대부분 완료

### 리포트 데이터
- **5개**의 기존 리포트 (일일, 주간, 월간, 맞춤)
- 상태: 완료 4건, 생성중 1건

### Edge Cases
- **연속 불량**: 같은 설비에서 연속 불량 발생
- **심야 검사**: 특이 시간대 검사
- **100% 합격**: 특정 설비의 완벽한 성능

## 실제 Supabase 연결로 전환

프론트엔드 테스트가 완료되고 Supabase가 준비되면 다음과 같이 전환합니다:

1. `src/config/app.config.ts` 파일 열기
2. `USE_MOCK_MODE` 값을 `false`로 변경:

```typescript
export const USE_MOCK_MODE = false
```

3. `.env` 파일에 Supabase 연결 정보 설정:

```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

4. 애플리케이션 재시작

## 문제 해결

### Mock 데이터가 표시되지 않을 때

1. 브라우저 콘솔 확인
2. `USE_MOCK_MODE = true` 설정 확인
3. 브라우저 캐시 삭제 후 재시작

### 리포트 다운로드가 안될 때

1. 브라우저 팝업 차단 해제
2. 파일 다운로드 권한 확인
3. 브라우저 콘솔에서 에러 확인

### 로그인이 안될 때

1. Mock 모드 활성화 확인
2. 테스트 계정 정보 확인
3. 브라우저 콘솔에서 출력되는 계정 정보 확인

## 성능 테스트

Mock 서비스는 실제 API 응답 시간을 시뮬레이션합니다:

- 일반 조회: 500ms 지연
- 로그인: 1000ms 지연
- 리포트 생성: 2000ms 지연

이 지연 시간은 `src/config/app.config.ts`의 `MOCK_CONFIG`에서 조정할 수 있습니다.

## 개발 팁

### Mock 데이터 수정

Mock 데이터를 수정하려면 해당 Mock 서비스 파일을 편집하세요:

```typescript
// src/ui_test/mockServices/mockInspectionService.ts
export const mockInspections = [
  // 여기에 새로운 Mock 데이터 추가
]
```

### 새로운 Mock API 추가

1. Mock 서비스 파일에 함수 추가
2. 적절한 지연 시간 추가 (`await new Promise(resolve => setTimeout(resolve, 500))`)
3. Mock 데이터 반환

### 디버깅

콘솔 로그를 활성화하려면:

```typescript
// src/config/app.config.ts
export const MOCK_CONFIG = {
  logMockCalls: true,  // Mock API 호출 로그 출력
}
```

## 체크리스트

프론트엔드 테스트 완료 전 확인사항:

- [ ] 모든 페이지가 정상적으로 렌더링됨
- [ ] 로그인/로그아웃이 정상 작동함
- [ ] 검사 실행 및 저장이 정상 작동함
- [ ] 불량 관리 CRUD가 정상 작동함
- [ ] 분석 차트가 정상적으로 표시됨
- [ ] 리포트 생성 및 다운로드가 정상 작동함
- [ ] PDF/Excel 파일이 정상적으로 열림
- [ ] 제품 모델 관리 CRUD가 정상 작동함
- [ ] 검사 항목 관리 CRUD가 정상 작동함
- [ ] 다국어 전환이 정상 작동함 (한국어/베트남어)
- [ ] 모바일 반응형이 정상 작동함
- [ ] 다크/라이트 테마 전환이 정상 작동함

---

**문의사항이나 버그 발견 시:**
- GitHub Issues에 등록
- 개발팀에 연락

**마지막 업데이트:** 2025-01-20
